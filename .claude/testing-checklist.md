# 🧪 Testing Checklist - CBT System

## Quick Test Guide

### 1️⃣ Login Flow Test (가장 중요!)

**Steps:**
1. 브라우저 개발자 도구 열기 (F12)
2. Console 탭 확인
3. 이름 입력 후 로그인 클릭
4. 확인사항:
   - [ ] "📥 최신 데이터 로딩 중..." 버튼 텍스트 보임
   - [ ] Console에 "📥 서버에서 최신 문제 데이터 가져오는 중..." 메시지
   - [ ] Console에 "✅ 서버에서 XX개 문제 로드 완료" 메시지
   - [ ] 홈 화면으로 이동
   - [ ] 문제 수가 최신 데이터와 일치

**Expected Console Output:**
```
🔍 로그인 시도: [이름]
✅ 로그인 성공: [이름] (ID: X)
📥 서버에서 최신 문제 데이터 가져오는 중...
📊 Google Sheets에서 5개 시트 데이터 가져오기 시작...
✅ 서버에서 XXXX개 문제 로드 완료
```

---

### 2️⃣ Admin Sync Test

**Steps:**
1. 관리자 페이지 접속 (/admin)
2. "Google Sheets 동기화" 버튼 클릭
3. 동기화 모드 선택 팝업 확인:
   - [ ] "확인(OK): 병합 모드" 메시지 보임
   - [ ] "취소(Cancel): 교체 모드" 메시지 보임

**Merge Mode Test (권장):**
1. "확인" 클릭 (병합 모드)
2. Console 확인:
   - [ ] "📊 병합 결과:" 메시지
   - [ ] "시트에서 가져온 문제: XX개"
   - [ ] "로컬 전용 문제 유지: XX개"
   - [ ] "최종 문제 수: XX개"

**Replace Mode Test:**
1. "취소" 클릭 (교체 모드)
2. Console 확인:
   - [ ] "📊 교체 모드: XX개 문제로 완전 교체"
   - [ ] 백업 파일 다운로드됨

---

### 3️⃣ Delete All Data Test

**Steps:**
1. 관리자 페이지에서 "모든 데이터 삭제" 클릭
2. 확인 팝업에서 "확인" 클릭
3. Console 확인:
   - [ ] "🧹 브라우저 캐시 삭제 시작..."
   - [ ] "✅ LocalStorage 삭제 완료"
   - [ ] "✅ SessionStorage 삭제 완료"
   - [ ] "✅ Cache API 삭제 완료"
   - [ ] "✅ IndexedDB 삭제 완료"
   - [ ] "📥 서버에서 최신 문제 데이터 가져오는 중..."
   - [ ] "✅ 서버에서 XX개 문제 로드 완료"
4. Alert 확인:
   - [ ] "모든 데이터와 브라우저 캐시가 삭제되었습니다"
   - [ ] "서버에서 XX개 문제를 로드했습니다" 표시
5. 백업 파일:
   - [ ] backup-YYYYMMDD-HHMMSS.json 파일 다운로드됨

---

### 4️⃣ Ngrok Cache Prevention Test

**Before Test:**
- ngrok 주소로 접속 가능해야 함
- 서버 데이터를 일부 변경 (예: 문제 1개 추가)

**Steps:**
1. PC 브라우저에서 ngrok 주소 접속
2. 로그인
3. 문제 수 확인
4. 서버에서 문제 추가/수정
5. 브라우저 새로고침 (Ctrl+F5)
6. 로그아웃 후 다시 로그인
7. 확인사항:
   - [ ] 최신 문제 수가 반영됨
   - [ ] 이전 캐시 데이터가 보이지 않음

**Mobile Test:**
1. 모바일에서 ngrok 주소 접속
2. 위 과정 반복
3. 확인:
   - [ ] 최신 데이터 표시
   - [ ] 캐시 문제 없음

---

### 5️⃣ Session Resume Test

**Steps:**
1. 로그인
2. 시험 시작
3. 몇 문제 풀기
4. 브라우저 닫기 (또는 탭 닫기)
5. 다시 로그인
6. 확인:
   - [ ] "이전에 풀던 시험이 있습니다" 팝업
   - [ ] 진행 상황이 정확히 표시됨
   - [ ] "확인" 선택 시 이전 시험 이어서 풀기
   - [ ] "취소" 선택 시 새로운 시험 시작

---

## 🐛 Known Issues & Workarounds

### Issue 1: 모바일 로그인 기록 미저장
- **원인**: 로컬 서버라 인터넷 주소 불분명
- **해결**: 호스팅 후 자동 해결 예정
- **현재**: 정상 동작 (저장만 안됨)

### Issue 2: 동기화 시 데이터 손실 우려
- **해결**: 병합 모드 사용 권장
- **백업**: 교체 모드는 자동 백업 생성

---

## ✅ Success Criteria

모든 테스트가 통과하면:
- ✅ 로그인 시 최신 데이터 로드
- ✅ 수동 동기화만 가능
- ✅ 데이터 삭제 시 자동 복원
- ✅ 캐시 문제 해결
- ✅ 병합/교체 모드 선택 가능

---

## 📞 문제 발생 시

1. **Console 로그 확인**
   - F12 → Console 탭
   - 에러 메시지 확인

2. **Network 탭 확인**
   - Google Sheets API 호출 확인
   - 응답 상태 확인

3. **LocalStorage 확인**
   - Application → Local Storage
   - questions, members 키 확인

4. **캐시 완전 삭제**
   - Ctrl+Shift+Delete
   - 모든 캐시 삭제
   - 브라우저 재시작
