# ⚡ 전기기능사 CBT 시스템

## 📋 최근 수정사항

### 2025-11-13 - 데이터 동기화 시스템 전면 개선
- ✅ **Google Sheets 동기화 시 로컬 데이터 보존 옵션 추가**:
  - **병합 모드** (권장): 시트 데이터로 업데이트하되 로컬 전용 문제는 유지
    - 시트에 있는 문제 ID는 최신 버전으로 업데이트
    - 로컬에만 있는 문제는 그대로 유지 (데이터 손실 방지)
  - **교체 모드**: 시트 데이터로 완전히 교체 (기존 동작, 백업 자동 생성)
  - 동기화 시 모드 선택 팝업 표시
  - 최종 문제 수 정보 표시

- ✅ **실시간 동기화 제거 - 수동 동기화만 허용**:
  - 앱 시작 시 자동 샘플 데이터 로드 제거
  - 관리자가 동기화 버튼을 수동으로 클릭해야만 데이터 동기화 진행
  - 사용자 로그인 시 또는 데이터 초기화 시에만 서버 데이터 자동 로드

- ✅ **로그인 시 서버 최신 데이터 자동 로딩**:
  - 사용자 로그인 시 Google Sheets에서 최신 문제 데이터 자동 로드
  - 로딩 중 버튼에 "📥 최신 데이터 로딩 중..." 표시
  - 서버 로드 실패 시에도 로그인은 정상 진행 (로컬 데이터 사용)
  - 로그인 후 항상 최신 문제 데이터로 시험 응시 가능

- ✅ **데이터 초기화 시 서버 데이터 자동 로딩**:
  - "모든 데이터 초기화" 버튼 클릭 시:
    1. 기존 데이터 백업 자동 다운로드
    2. 모든 데이터 삭제
    3. 브라우저 캐시 삭제
    4. **서버에서 최신 데이터 자동 로드** (새로 추가)
    5. 페이지 새로고침
  - 초기화 후 즉시 최신 데이터로 복구됨

- ✅ **브라우저 캐시 완전 삭제 기능 추가**:
  - LocalStorage 완전 삭제
  - SessionStorage 삭제
  - Cache API 삭제 (Service Worker 캐시)
  - IndexedDB 삭제 (사용 중이라면)
  - 모바일/PC 모두 지원
  - "모든 데이터 초기화" 버튼에서 자동 실행

- ✅ **ngrok 캐시 방지 설정 추가**:
  - HTML meta 태그에 캐시 방지 헤더 추가
  - Vite 서버 설정에 캐시 방지 헤더 추가
  - Build 설정에 hash 기반 캐시 버스팅 추가
  - 외부 접속 시에도 최신 데이터 표시

- ✅ **모바일 환경에서 로그인 기록 저장 강화**:
  - 저장 실패 시 최대 3번까지 재시도
  - 저장 확인 로직 추가 (실제로 저장되었는지 검증)
  - 상세한 로깅으로 디버깅 용이성 향상
  - 로그인 기록 저장 실패해도 로그인은 정상 진행

**변경된 파일:**
- `src/App.tsx` - 자동 샘플 데이터 로드 제거
- `src/pages/Login.tsx` - 로그인 시 서버 데이터 로딩, 로딩 UI 추가
- `src/pages/Admin.tsx` - 동기화 모드 선택, 데이터 초기화 시 서버 로딩
- `src/services/storage.ts` - 브라우저 캐시 삭제 함수, 로그인 기록 저장 강화
- `index.html` - 캐시 방지 meta 태그 추가
- `vite.config.ts` - 캐시 방지 헤더, hash 기반 asset 추가

**데이터 동기화 흐름:**
```
앱 시작 → (데이터 없음) → 로그인 → 서버에서 최신 데이터 자동 로드 → 시험 응시
또는
관리자 → 동기화 탭 → 병합/교체 모드 선택 → 수동 동기화
```

**사용자 시나리오:**
1. **로그인** → 서버에서 최신 문제 자동 로드 (📥 표시) ✅
2. **시험 응시** → 항상 최신 문제로 응시 ✅
3. **관리자 동기화** → 병합 모드로 로컬 문제 유지하며 업데이트 ✅
4. **데이터 초기화** → 삭제 후 서버에서 최신 데이터 자동 복구 ✅
5. **캐시 삭제** → 모든 브라우저 캐시 완전 삭제 ✅

---

### 2025-11-09 01:00 - 채점 결과 모달 확인 버튼 정답 제거 로직 강화
- ✅ **확인 버튼 정답 제거 로직 강화**:
  - 확인 버튼 클릭 시 오답노트에 실제로 존재하는지 확인 후 제거
  - 제거 전/후 오답노트 상태 확인
  - 제거된 문제 수 확인
  - 제거가 제대로 되지 않은 경우 경고 메시지 출력

- ✅ **`handleScore` 함수 정답 제거 로직 강화**:
  - 채점하기 버튼 클릭 시 오답노트에 실제로 존재하는지 확인 후 제거
  - 이미 오답노트에 없는 경우 로그 출력

**변경된 파일:**
- `src/pages/Exam.tsx`
  - `handleScore` 함수에서 오답노트 존재 여부 확인 후 제거
  - 확인 버튼 클릭 핸들러에서 오답노트 존재 여부 확인 후 제거
  - 제거 전/후 오답노트 상태 확인 및 로그 출력
  - 제거가 제대로 되지 않은 경우 경고 메시지 출력

**디버깅 방법:**
1. 브라우저 개발자 도구 콘솔 열기 (F12)
2. 오답노트 복습 모드에서 채점하기 버튼 클릭
3. 확인 버튼 클릭
4. 콘솔 로그 확인:
   - 제거 전/후 오답노트 문제 ID
   - 각 문제별 오답노트 존재 여부
   - 제거된 문제 수
   - 제거가 제대로 되지 않은 경우 경고 메시지

---

### 2025-11-09 00:55 - 채점 결과 모달 확인 버튼 정답 제거 로직 디버깅 강화
- ✅ **확인 버튼 정답 제거 로직 디버깅 강화**:
  - 확인 버튼 클릭 시 상세한 디버깅 로그 추가
  - 제거 전/후 오답 수 확인
  - 제거된 문제 수 확인
  - 각 문제별 제거 과정 추적

- ✅ **`removeWrongAnswer` 함수 디버깅 로그 추가**:
  - 제거 전/후 오답 수 확인
  - 제거 전 오답 목록 출력
  - 제거된 문제 확인
  - 문제가 오답노트에 없을 때 경고 메시지

**변경된 파일:**
- `src/pages/Exam.tsx`
  - 확인 버튼 클릭 핸들러에 상세한 디버깅 로그 추가
  - 제거 전/후 오답 수 확인
  - 제거된 문제 수 확인
- `src/services/storage.ts`
  - `removeWrongAnswer` 함수에 상세한 디버깅 로그 추가
  - 제거 전/후 오답 수 확인
  - 제거 전 오답 목록 출력
  - 문제가 오답노트에 없을 때 경고 메시지

**디버깅 방법:**
1. 브라우저 개발자 도구 콘솔 열기 (F12)
2. 오답노트 복습 모드에서 채점하기 버튼 클릭
3. 확인 버튼 클릭
4. 콘솔 로그 확인:
   - 제거 전/후 오답 수
   - 제거된 문제 목록
   - 각 문제별 제거 과정

---

### 2025-11-09 00:50 - 채점 결과 모달 확인 버튼 클릭 시 정답 문제 제거
- ✅ **채점 결과 모달 확인 버튼 클릭 시 정답 문제 제거**:
  - 오답노트 복습 모드에서 채점 결과 모달의 "확인" 버튼 클릭 시 정답 문제를 오답노트에서 제거
  - 채점하기 버튼 클릭 시 이미 제거되지만, 확인 버튼에서도 추가로 제거하여 확실하게 처리
  - 오답노트 모드일 때만 동작 (일반 모드에서는 동작하지 않음)

**변경된 파일:**
- `src/pages/Exam.tsx`
  - 채점 결과 모달의 확인 버튼 클릭 핸들러에 정답 문제 제거 로직 추가
  - 오답노트 모드일 때만 정답 문제를 오답노트에서 제거

**사용자 시나리오:**
1. **오답노트 복습하기** → 오답 문제 선택 ✅
2. **문제 풀이** → 문제에 답변 선택 ✅
3. **채점하기 버튼 클릭** → 채점 결과 모달 표시 ✅
4. **격려 메시지 확인** → "X문제 응시해서 Y문제 맞췄습니다" 표시 ✅
5. **확인 버튼 클릭** → 정답 문제가 오답노트에서 제거됨 ✅
6. **오답노트 확인** → 정답 맞춘 문제는 사라지고 틀린 문제만 남음 ✅

---

### 2025-11-09 00:45 - 오답노트 복습 모드 정답 즉시 제거 기능 추가
- ✅ **오답노트 복습 모드 정답 즉시 제거**:
  - 오답노트 복습 모드에서 정답을 맞춘 문제를 채점 순간 즉시 오답노트에서 제거
  - 채점하기 버튼 클릭 시 정답 문제 즉시 제거
  - 시험 제출 시 정답 문제 즉시 제거
  - 일반 모드에서는 기존 로직 유지 (연속 3회 정답 시 제거)

- ✅ **오답노트 관리 로직 개선**:
  - 오답노트 모드: 정답 맞춘 문제 즉시 제거 (`removeWrongAnswer`)
  - 일반 모드: 연속 3회 정답 시 제거 (`updateCorrectAnswer`)
  - 오답 문제는 계속 오답노트에 유지

**변경된 파일:**
- `src/pages/Exam.tsx`
  - `removeWrongAnswer` import 추가
  - `handleScore` 함수에 오답노트 모드 정답 즉시 제거 로직 추가
  - `handleSubmit` 함수에 오답노트 모드 정답 즉시 제거 로직 추가
- `src/pages/Result.tsx`
  - `removeWrongAnswer` import 추가
  - 오답 저장 로직에 오답노트 모드 정답 즉시 제거 로직 추가

**사용자 시나리오:**
1. **오답노트 복습하기** → 오답 문제 선택 (예: 5문제) ✅
2. **문제 풀이** → 문제에 답변 선택 ✅
3. **채점하기 버튼 클릭** → 정답을 맞춘 문제가 즉시 오답노트에서 제거 ✅
4. **오답노트 확인** → 정답 맞춘 문제는 사라지고 틀린 문제만 남음 ✅
5. **시험 제출** → 정답 맞춘 문제가 즉시 오답노트에서 제거 ✅
6. **오답노트 확인** → 틀린 문제만 남아서 계속 복습 가능 ✅

---

### 2025-11-09 00:40 - 오답노트 복습 모드 채점 로직 개선
- ✅ **오답노트 복습 모드 채점 로직 개선**:
  - 오답노트 복습 모드에서 응시한 문제만 대상으로 채점
  - 불합격 표시 제거
  - 격려 메시지 추가 (정답률에 따라 다른 메시지)
    - 100% 정답: "아주 잘하였어요! 완벽합니다! 🎉"
    - 80% 이상: "훌륭합니다! 잘하고 있어요! 👍"
    - 60% 이상: "좋아요! 계속 노력하세요! 💪"
    - 60% 미만: "조금 더 노력하면 더 좋아질 거예요! 화이팅! 💪"
  - "X문제 응시해서 Y문제 맞췄습니다" 정보 표시
  - 응시한 문제 수, 정답 수, 오답 수, 정답률 표시

- ✅ **채점 결과 모달 개선**:
  - 오답노트 모드일 때 격려 메시지와 응시 정보 표시
  - 일반 모드일 때 합격/불합격 표시 유지
  - 오답노트 모드일 때 파란색 배경으로 구분

**변경된 파일:**
- `src/pages/Exam.tsx`
  - `handleScore` 함수에 오답노트 모드 채점 로직 추가
  - 응시한 문제만 대상으로 채점 (오답노트 모드)
  - 격려 메시지 생성 로직 추가
  - 채점 결과 모달에 오답노트 모드 UI 추가
  - `scoreResult` state에 `encouragement`, `answeredCount` 필드 추가

**사용자 시나리오:**
1. **오답노트 복습하기** → 오답 문제 선택 ✅
2. **문제 풀이** → 일부 문제에 답변 선택 ✅
3. **채점하기 버튼 클릭** → 응시한 문제만 대상으로 채점 ✅
4. **격려 메시지 표시** → 정답률에 따라 다른 격려 메시지 표시 ✅
5. **응시 정보 표시** → "X문제 응시해서 Y문제 맞췄습니다" 표시 ✅
6. **불합격 표시 없음** → 합격/불합격 표시 제거 ✅

---

### 2025-11-09 00:35 - 오답노트 복습 모드 결과 화면 개선
- ✅ **오답노트 복습 모드 결과 화면 개선**:
  - 오답노트 복습 모드에서 불합격 표시 제거
  - "재응시 문제 X문제 응시해서 Y문제 맞췄습니다" 정보 표시
  - 정답률 표시 추가
  - 재응시 문제 수, 정답 수, 오답 수 표시
  - 파란색 배경으로 일반 시험 모드와 구분

- ✅ **시험 모드 전달 로직 개선**:
  - `Exam.tsx`에서 `mode`를 state로 관리
  - `ExamSession`에서 `mode` 복원
  - `Result.tsx`에 `mode` prop 전달
  - 오답노트 복습 모드일 때 다른 UI 표시

**변경된 파일:**
- `src/pages/Result.tsx`
  - `mode` prop 추가
  - 오답노트 복습 모드일 때 불합격 표시 제거
  - "재응시 문제 X문제 응시해서 Y문제 맞췄습니다" 정보 표시
  - 파란색 배경으로 일반 시험 모드와 구분
- `src/pages/Exam.tsx`
  - `mode`를 state로 관리
  - `ExamSession`에서 `mode` 복원
  - `onComplete` 호출 시 `mode` 전달
  - 세션 자동 저장 시 `mode` 포함
- `src/App.tsx`
  - `examMode` state 추가
  - `handleCompleteExam`에서 `mode` 받아서 저장
  - `handleStartReview`에서 오답노트 복습 모드로 설정
  - `Result` 컴포넌트에 `mode` 전달

**사용자 시나리오:**
1. **오답노트 복습하기** → 오답 문제 선택 ✅
2. **시험 응시** → 문제 풀이 ✅
3. **시험 제출** → 결과 화면 표시 ✅
4. **오답노트 복습 모드** → "재응시 문제 X문제 응시해서 Y문제 맞췄습니다" 표시 ✅
5. **불합격 표시 제거** → 합격/불합격 표시 없음 ✅
6. **정답률 표시** → 정답률 퍼센트 표시 ✅

---

### 2025-11-09 00:30 - 채점하기 버튼에 오답 저장 기능 추가
- ✅ **채점하기 버튼에 오답 저장 기능 추가**:
  - "채점하기" 버튼 클릭 시 오답 문제를 DB(LocalStorage)에 저장
  - 시험 제출 전에도 채점 결과를 확인하면서 오답이 저장됨
  - 채점 결과 계산과 동시에 오답 저장 로직 실행
  - 정답 처리: `updateCorrectAnswer` 호출 (연속 3회 정답 시 오답노트에서 제거)
  - 오답 처리: `addWrongAnswer` 호출 (틀린 문제를 오답노트에 저장)

- ✅ **채점하기 버튼 디버깅 로그 추가**:
  - 채점하기 버튼 클릭 시 상세한 디버깅 로그 출력
  - 각 문제별 답변 확인 로그
  - 오답 저장 시도/완료 로그
  - 저장된 오답 수와 총 오답 수 확인

**변경된 파일:**
- `src/pages/Exam.tsx`
  - `handleScore` 함수에 오답 저장 로직 추가
  - 채점 결과 계산과 동시에 오답 저장 수행
  - 정답/오답 처리 로직 추가
  - 상세한 디버깅 로그 추가

**사용자 시나리오:**
1. **문제 풀이 중** → 여러 문제에 답변 선택 ✅
2. **채점하기 버튼 클릭** → 오답 문제가 DB에 저장됨 ✅
3. **채점 결과 모달 표시** → 점수, 정답/오답/미답변 개수, 정답률 표시 ✅
4. **오답 노트 확인** → 저장된 오답 문제 확인 가능 ✅
5. **시험 계속 진행** → 추가 문제 풀이 가능 ✅
6. **시험 제출** → 최종 결과 페이지로 이동 ✅

---

### 2025-11-09 00:25 - 오답 노트 저장 로직 디버깅 개선
- ✅ **오답 저장 로직 디버깅 강화**:
  - `Exam.tsx`의 `handleSubmit` 함수에 상세한 디버깅 로그 추가
  - `Result.tsx`의 오답 저장 로직에 상세한 디버깅 로그 추가
  - `storage.ts`의 `addWrongAnswer` 함수에 상세한 디버깅 로그 추가
  - 오답 저장 과정을 단계별로 추적 가능하도록 개선

- ✅ **오답 저장 로직 확인**:
  - 시험 제출 시 오답 저장 로직이 제대로 실행되는지 확인
  - 오답 저장 시 문제 ID, 카테고리, 사용자 답변, 정답 정보 로그 출력
  - 저장된 오답 수와 목록을 콘솔에 출력

**변경된 파일:**
- `src/pages/Exam.tsx`
  - `getWrongAnswers` import 추가
  - `handleSubmit` 함수에 상세한 디버깅 로그 추가
  - 오답 저장 과정을 단계별로 추적 가능하도록 개선
- `src/pages/Result.tsx`
  - 오답 저장 로직에 상세한 디버깅 로그 추가
  - 저장된 오답 수를 카운트하여 출력
- `src/services/storage.ts`
  - `addWrongAnswer` 함수에 상세한 디버깅 로그 추가
  - 저장된 오답 목록을 콘솔에 출력

**디버깅 방법:**
1. 브라우저 개발자 도구 콘솔 열기 (F12)
2. 시험 제출 후 콘솔 로그 확인
3. 오답 저장 과정을 단계별로 확인
4. 저장된 오답 수와 목록 확인

---

### 2025-11-09 00:20 - 오답 노트 기능 개선
- ✅ **오답 저장 로직 개선**:
  - 시험 채점을 기준으로 사용자가 답변을 선택했지만 틀린 문제만 오답 노트에 저장
  - 사용자가 답변을 선택하지 않은 문제는 오답 노트에 저장하지 않음
  - `Exam.tsx`와 `Result.tsx`에서 오답 저장 로직 개선
  - 오답 저장 시 카테고리 정보도 함께 저장

- ✅ **오답 노트 카테고리별 구분 표시**:
  - 오답 노트를 카테고리별로 구분해서 표시
  - 전기이론 오답문제 (파란색 배경)
  - 전기기기 오답문제 (보라색 배경)
  - 전기설비 오답문제 (주황색 배경)
  - 기타 오답문제 (회색 배경)
  - 카테고리별로 정렬해서 표시 (전기이론 → 전기기기 → 전기설비 → 기타 순서)

**변경된 파일:**
- `src/pages/Exam.tsx`
  - 오답 저장 로직 개선: 사용자가 답변을 선택했고 틀린 경우만 저장
  - 오답 저장 시 카테고리 정보 로그 추가
- `src/pages/Result.tsx`
  - 오답 저장 로직 개선: 사용자가 답변을 선택했고 틀린 경우만 저장
  - 오답 저장 시 카테고리 정보 로그 추가
- `src/pages/WrongAnswers.tsx`
  - 카테고리별 색상 구분 추가
  - 카테고리별 정렬 기능 추가
  - 제목을 "전기이론 오답문제", "전기기기 오답문제", "전기설비 오답문제"로 명확하게 표시

**사용자 시나리오:**
1. **시험 응시** → 여러 문제에 답변 선택 ✅
2. **시험 제출** → 채점 결과 확인 ✅
3. **오답 노트 확인** → 틀린 문제만 카테고리별로 구분해서 표시 ✅
4. **전기이론 오답문제** → 파란색 배경으로 구분 ✅
5. **전기기기 오답문제** → 보라색 배경으로 구분 ✅
6. **전기설비 오답문제** → 주황색 배경으로 구분 ✅

---

### 2025-11-09 00:10 - 채점 버튼 추가
- ✅ **채점 버튼 추가**:
  - 문제 풀이 화면 상단에 "📊 채점하기" 버튼 추가
  - 노란색 배경 (`bg-yellow-600`)으로 다른 버튼과 구분
  - 채점 버튼 클릭 시 자동으로 문제 풀이 상태 저장

- ✅ **채점 결과 모달**:
  - 채점 결과를 모달로 표시
  - 점수 표시: 60점 이상 합격 (초록색), 미만 불합격 (빨간색)
  - 상세 결과 표시:
    - 총 문제 수
    - 정답 개수 (초록색)
    - 오답 개수 (빨간색)
    - 미답변 개수 (노란색)
    - 정답률 (파란색)
  - 시험은 계속 진행 가능 (제출하지 않음)
  - 모달 닫기 버튼으로 시험 계속 진행

**변경된 파일:**
- `src/pages/Exam.tsx`
  - `showScoreModal`, `scoreResult` state 추가
  - `handleScore` 함수 추가 (채점 결과 계산 및 모달 표시)
  - "📊 채점하기" 버튼 UI 추가
  - 채점 결과 모달 UI 추가

**사용자 시나리오:**
1. **문제 풀이 중** → 여러 문제에 답변 선택 ✅
2. **채점하기 버튼 클릭** → 자동으로 문제 풀이 상태 저장 ✅
3. **채점 결과 모달 표시** → 점수, 정답/오답/미답변 개수, 정답률 표시 ✅
4. **확인 버튼 클릭** → 모달 닫고 시험 계속 진행 ✅
5. **제출 버튼 클릭** → 최종 결과 페이지로 이동 ✅

---

### 2025-11-09 00:05 - 이전 시험 세션 복원 버그 수정
- ✅ **이전 답변 기록 복원 문제 해결**:
  - "이전 시험 계속하기" 버튼 클릭 시 이전에 답변했던 기록이 초기화되는 문제 수정
  - 문제 ID 일치 여부를 확인하여 정확한 세션 복원
  - 컴포넌트 마운트 시 초기 세션 복원 로직 추가
  - `questions` prop 변경 시마다 세션 확인 및 복원

- ✅ **세션 복원 로직 개선**:
  - 초기 `answers`, `startTime`, `remainingTime`을 세션에서 복원
  - 문제 ID 배열을 정렬하여 일치 여부 확인
  - 세션 복원 시 남은 시간도 정확하게 계산

**변경된 파일:**
- `src/pages/Exam.tsx`
  - 컴포넌트 마운트 시 초기 세션 복원 로직 추가
  - `questions` prop 변경 시마다 세션 확인 및 복원
  - 문제 ID 일치 여부를 확인하여 정확한 세션 복원
  - 초기 `answers`, `startTime`, `remainingTime`을 세션에서 복원

**사용자 시나리오:**
1. **문제 풀이 중 답변 선택** → 2번 문제에 답변 선택 ✅
2. **나가기 버튼 클릭** → 홈 화면으로 이동 (세션 자동 저장) ✅
3. **이전 시험 계속하기 클릭** → 저장된 시험 화면으로 이동 ✅
4. **2번 문제 확인** → 이전에 선택한 답변이 그대로 표시됨 ✅

---

### 2025-11-08 23:58 - 이전 시험 계속하기 버튼 추가
- ✅ **이전 시험 계속하기 버튼 추가**:
  - Home 화면에 "이전 시험 계속하기" 버튼 추가
  - 이전 시험 세션이 저장되어 있는 사용자에게만 표시
  - 진행 상황 표시: "진행 상황: X / Y 문제 풀이 완료"
  - 버튼 클릭 시 저장된 시험 화면으로 이동
  - 보라색 버튼으로 "시험 시작" 버튼과 구분

- ✅ **시험 시작 버튼 개선**:
  - 이전 세션 확인 팝업 제거
  - "시험 시작" 클릭 시 이전 세션 삭제 후 새 시험 시작
  - "이전 시험 계속하기" 버튼과 명확히 구분

**변경된 파일:**
- `src/pages/Home.tsx`
  - `hasPreviousSession`, `previousSession` state 추가
  - `useEffect`로 이전 세션 확인 로직 추가
  - `handleResumePreviousExam` 함수 추가
  - "이전 시험 계속하기" 버튼 UI 추가
  - "시험 시작" 버튼의 이전 세션 확인 팝업 제거

**사용자 시나리오:**
1. **문제 풀이 중 나가기 클릭** → 홈 화면으로 이동 ✅
2. **이전 시험 세션이 있으면** → "이전 시험 계속하기" 버튼 표시 ✅
3. **진행 상황 표시** → "진행 상황: 15 / 60 문제 풀이 완료" ✅
4. **버튼 클릭** → 저장된 시험 화면으로 이동 ✅
5. **"시험 시작" 클릭** → 이전 세션 삭제 후 새 시험 시작 ✅

---

### 2025-11-08 23:55 - 나가기 버튼 팝업 제거 (UX 개선)
- ✅ **Home 화면 자동 팝업 제거**:
  - Home 화면 진입 시 자동으로 나타나던 "이전에 풀던 문제가 있습니다" 팝업 제거
  - 시험 시작 버튼을 눌렀을 때만 이전 세션 확인 팝업 표시
  - 나가기 버튼 클릭 → 팝업 없이 바로 홈으로 이동
  - 로그인 상태와 시험 세션은 유지됨
  
- ✅ **Login 컴포넌트 Router 의존성 제거**:
  - `useNavigate` 제거 → 콜백 패턴으로 변경
  - `onResumeExam` prop 추가
  - Router 컴포넌트 없이도 정상 작동

**변경된 파일:**
- `src/pages/Home.tsx` - useEffect의 자동 팝업 제거 (36-47줄)
- `src/pages/Login.tsx` - useNavigate 제거, 콜백 패턴으로 변경

**사용자 시나리오:**
1. **문제 풀이 중 나가기 클릭** → 팝업 없이 바로 홈 화면으로 이동 ✅
2. **로그인 상태 유지** → 다시 로그인할 필요 없음 ✅
3. **시험 세션 저장** → 자동 저장되어 다음에 이어서 풀 수 있음 ✅
4. **시험 시작 버튼 클릭** → 이전 세션 확인 팝업 표시 (한 번만) ✅

---

### 2025-11-08 23:45 - 사용자 경험 개선 (로그인, 저장, 문제 번호 카테고리 구분)
- ✅ **로그인 시 이전 시험 복구 안내**:
  - 로그인 시 이전에 풀던 시험이 있으면 팝업으로 알림
  - 선택 옵션:
    - ✅ 확인: 이전 시험 이어서 풀기
    - ❌ 취소: 새로운 시험 시작하기
  - 진행 상황도 함께 표시 (예: 15/60 문제 풀이 완료)

- ✅ **문제 풀이 중 저장 기능 개선**:
  - **저장하기 버튼 추가**: 상단 헤더에 💾 저장하기 버튼 추가
  - **나가기 버튼 개선**: 팝업 메시지 없이 자동 저장 후 나가기
  - 저장 시 알림: "답변한 문제: X/60개"

- ✅ **문제 번호 카테고리별 구분**:
  - 전기이론 (1-20): 파란색 라벨
  - 전기기기 (21-40): 보라색 라벨
  - 전기설비 (41-60): 주황색 라벨
  - 각 카테고리별로 섹션을 나눠 표시

- ✅ **문제 상태 시각화 강화**:
  - 현재 문제: 파란색 (bg-blue-500)
  - 답변 완료: 초록색 테두리 + 초록색 배경 (border-2 border-green-500)
  - 미답변: 회색 (bg-gray-200)
  - 범례 추가: 각 상태를 한눈에 파악

**변경된 파일:**
- `src/pages/Login.tsx` - 이전 시험 복구 팝업 추가
- `src/pages/Exam.tsx`
  - 저장하기 버튼 추가
  - 나가기 버튼 팝업 제거
  - 카테고리별 문제 번호 구분
  - 답변 완료 문제 시각화 개선

**사용자 시나리오:**
1. **'고광욱' 님 로그인** → 팝업: "이전에 풀던 시험이 있습니다! 진행 상황: 15/60"
2. **확인 선택** → 이전 시험 이어서 풀기
3. **문제 풀이 중** → 💾 저장하기 버튼 클릭 → "저장 완료! 답변한 문제: 20/60개"
4. **나가기 클릭** → 팝업 없이 바로 나가기 (자동 저장됨)
5. **다시 로그인** → 팝업: "이전에 풀던 시험이 있습니다! 진행 상황: 20/60"

---

### 2025-11-08 23:30 - 시트 선택 기능 추가 (속도 개선)
- ✅ **시트 선택 UI 추가**: 동기화 탭에 시트 선택 체크박스 추가
  - 전체 선택/해제 기능
  - 개별 시트 선택 (questions, 전기이론, 전기기기, 전기설비, 기타)
  - 선택된 시트 개수 실시간 표시
- ✅ **선택적 가져오기**: 선택한 시트에서만 데이터 가져오기
  - 예: '전기이론' 시트만 선택 → 31개 문제만 가져옴 (빠른 속도)
  - 모든 시트 선택 → 193개 문제 모두 가져옴
- ✅ **선택적 업로드**: 선택한 시트로만 데이터 업로드
  - 예: '전기이론' + '전기기기' 시트 선택 → 해당 카테고리 문제만 업로드
  - 불필요한 시트 업로드 방지로 속도 개선
- ✅ **속도 개선 효과**:
  - 전체 시트 동기화: 약 30~40초
  - 단일 시트 동기화: 약 5~10초 (약 4배 빠름)
- **변경된 파일**:
  - `src/pages/Admin.tsx`
    - 시트 선택 UI 추가
    - 선택된 시트 검증 로직 추가
  - `src/services/googleSheetsService.ts`
    - `getAllQuestionsFromSheets(selectedSheets?)`: 선택한 시트만 처리
    - `bulkAddQuestionsToSheets(questions, selectedSheets?)`: 선택한 시트로만 업로드

**사용 방법:**
1. 관리자 페이지 → 동기화 탭
2. "동기화할 시트 선택" 섹션에서 필요한 시트만 체크
3. 가져오기/업로드 버튼 클릭
4. 선택한 시트만 빠르게 처리됨

---

### 2025-11-08 23:15 - Google Sheets 동기화 완전 개선 (중복 ID 자동 조정 + 카테고리별 업로드)
- ✅ **중복 ID 자동 조정**: 중복 ID를 제외하는 대신 자동으로 새 ID 할당
  - 중복 ID 발견 시 1000-1999 범위에서 사용 가능한 ID 자동 할당
  - 모든 시트의 문제를 누락 없이 가져옴
  - 예: ID 1(전기이론) + ID 1(전기기기) → ID 1 + ID 1000 (자동 할당)
- ✅ **카테고리별 업로드**: LocalStorage→Google Sheets 업로드 시 카테고리별 시트에 분산 저장
  - 이전: 모든 문제를 'questions' 시트에만 저장
  - 수정: 각 카테고리 문제를 해당 시트에 저장
    - 전기이론 → '전기이론' 시트
    - 전기기기 → '전기기기' 시트
    - 전기설비 → '전기설비' 시트
    - 기타 → '기타' 시트
- ✅ **상세한 진행 로그**: 카테고리별 업로드 진행 상황 실시간 표시
- **변경된 파일**:
  - `src/services/googleSheetsService.ts`
    - `getAllQuestionsFromSheets`: 중복 ID 자동 조정 로직 추가
    - `bulkAddQuestionsToSheets`: 카테고리별 시트에 분산 업로드

**예상 결과:**
- **가져오기**: 모든 시트(questions + 전기이론 + 전기기기 + 전기설비 + 기타)의 문제를 누락 없이 가져옴
  - 중복 ID는 자동으로 새 ID 할당
  - 총 193개 문제 (questions 121 + 전기이론 31 + 전기기기 20 + 전기설비 20 + 기타 1)
- **업로드**: 카테고리별로 해당 시트에 저장
  - 전기이론 문제 → '전기이론' 시트
  - 전기기기 문제 → '전기기기' 시트
  - 전기설비 문제 → '전기설비' 시트
  - 기타 문제 → '기타' 시트

---

### 2025-11-08 23:00 - Google Sheets 동기화 안정성 개선
- ✅ **상세한 디버깅 로그**: 각 시트별로 읽기 진행 상황과 결과를 자세히 표시
  - 시트별 원본 데이터 수
  - 필터링 후 추가된 문제 수
  - API 응답 상세 정보
  - 에러 발생 시 상세 스택 추적
- ✅ **API 제한 방지**: 각 시트 요청 간 0.5초 지연 추가
- ✅ **카테고리별 통계**: 동기화 완료 후 카테고리별 문제 수 자동 표시
- ✅ **견고한 에러 처리**: 한 시트에서 실패해도 다음 시트 계속 처리
- **변경된 파일**:
  - `src/services/googleSheetsService.ts` - 상세 로그, 지연, 통계 추가

**콘솔 출력 예시:**
```
📊 Google Sheets에서 모든 시트 데이터 가져오기 시작...
  📖 'questions' 시트 읽기 중...
  🔍 'questions' 응답: { success: true, dataLength: 122 }
  📊 'questions' 원본 데이터: 122행
  ✅ 'questions' 시트: 122개 문제 추가됨 (필터링: 122 → 122)
  ⏳ 다음 시트 요청 전 0.5초 대기...
  📖 '전기이론' 시트 읽기 중...
  ...
  
✅ 총 193개 문제를 Google Sheets에서 가져왔습니다

📊 카테고리별 문제 수:
   - 전기이론: 31개
   - 전기기기: 20개
   - 전기설비: 20개
   - 기타: 122개
```

---

### 2025-11-08 22:45 - Google Sheets 다중 시트 동기화 지원
- ✅ **모든 시트에서 데이터 가져오기**: 단일 'questions' 시트만 읽던 문제 해결
  - 이전: 'questions' 시트에서만 데이터 가져옴 (122문제만 인식)
  - 수정: 5개 시트 모두에서 데이터 가져옴
    - questions 시트
    - 전기이론 시트
    - 전기기기 시트
    - 전기설비 시트
    - 기타 시트
- ✅ **카테고리 자동 인식**: 시트 이름을 카테고리로 사용 (category 필드가 없는 경우)
- ✅ **중복 ID 자동 제거**: 여러 시트에서 가져올 때 중복 ID 자동 필터링
- ✅ **상세 로그**: 각 시트별로 가져온 문제 수를 콘솔에 표시
- **변경된 파일**:
  - `src/services/googleSheetsService.ts` - `getAllQuestionsFromSheets()` 다중 시트 지원

**예상 결과:**
- questions 시트: 122문제
- 전기이론 시트: 31문제
- 전기기기 시트: 20문제
- 전기설비 시트: 20문제
- 기타 시트: 0문제
- **총: 최대 193문제** (중복 ID 제외)

---

### 2025-11-08 22:30 - Google Sheets 동기화 ID 처리 개선
- ✅ **ID 타임스탬프 문제 해결**: LocalStorage의 실제 ID(1000-1999)를 Google Sheets에 그대로 전송
  - 이전: ID가 빈 문자열로 전송되어 Google Apps Script에서 타임스탬프 ID 생성
  - 수정: LocalStorage의 실제 ID를 숫자 그대로 전송
- ✅ **문제 관리 페이지 정렬**: 최신 문제(ID가 큰 문제)부터 표시되도록 ID 내림차순 정렬
- ✅ **Google Apps Script ID 처리 로직 개선**:
  - `handleAdd`: ID가 0이 아닌 경우 그대로 사용
  - `handleBulkAdd`: ID가 0이 아닌 경우 그대로 사용
- ✅ **업로드 확인 다이얼로그**: Google Sheets 업로드 시 중복 데이터 경고 메시지 추가
- **변경된 파일**:
  - `src/services/googleSheetsService.ts` - ID를 숫자 그대로 전송
  - `src/pages/Admin.tsx` - 문제 목록 ID 내림차순 정렬, 업로드 확인 추가
  - `google-apps-script.js` - ID 처리 로직 개선

### 2025-11-08 22:15 - Google Sheets CORS 문제 해결
- ✅ **CORS preflight 오류 해결**: POST 요청 사용 시 CORS preflight(OPTIONS) 요청 차단 문제 해결
  - POST 요청 → GET 요청으로 전환
  - CORS 정책에 의해 차단되던 preflight 요청 회피
- ✅ **배치 크기 축소**: 5개 → 2개로 축소하여 URL 길이 제한 회피
- ✅ **배치 간 지연 증가**: 500ms → 1000ms (1초)로 증가하여 API 안정성 향상
- ⏱️ **업로드 시간**: 60개 문제 기준 약 30초 소요 (안정성 우선)

### 2025-11-08 21:45 - Google Sheets 동기화 업로드 에러 수정
- ✅ **POST 요청으로 변경**: GET 요청의 URL 길이 제한 문제 해결
  - `bulkAddQuestionsToSheets()` 함수를 POST 요청으로 변경
  - URL 길이 제한 없이 대용량 데이터 전송 가능
  - 배치 크기를 5개로 조정하여 안정성 향상
- ✅ **데이터 정규화 강화**:
  - `answer` 필드를 숫자로 자동 변환 (문자열 "1", "2", "3", "4" → 숫자)
  - 선택지 텍스트와 일치하는 경우 자동으로 선택지 번호로 변환
  - **3단계 매칭 로직**: 정확한 일치 → 공백 제거 후 일치 → 부분 일치 (포함 관계)
  - 선택지를 먼저 문자열로 변환하여 타입 안전성 보장 (`opt.includes is not a function` 에러 해결)
  - `id`가 없거나 0이면 빈 문자열로 설정 (Google Sheets에서 자동 생성)
  - 유효하지 않은 데이터 자동 필터링
  - 경고 메시지 최소화 (너무 많은 로그 출력 방지)

### 2025-11-08 - Google Sheets 동기화 구조 개선
- ✅ **단일 시트 구조로 변경**: 카테고리별 시트 대신 단일 'questions' 시트 사용
  - Google Sheets 구조: id, category, question, option1, option2, option3, option4, answer, explanation, imageUrl
  - 모든 문제를 하나의 시트에서 관리하여 동기화 간소화
  - 데이터 정규화: Google Sheets에서 가져온 데이터를 Question 형식으로 자동 변환
  - ID 원본 유지: Google Sheets의 원본 ID를 최대한 유지하되 중복 시에만 조정
- ✅ **동기화 로직 개선**:
  - `getAllQuestionsFromSheets()`: 단일 'questions' 시트에서 모든 데이터 가져오기
  - `addQuestionToSheets()`: 단일 시트에 문제 추가
  - `updateQuestionInSheets()`: 단일 시트에서 문제 업데이트
  - `deleteQuestionFromSheets()`: 단일 시트에서 문제 삭제
  - `bulkAddQuestionsToSheets()`: POST 요청 사용, 배치 크기 5개로 일괄 추가
- ✅ **테스트 코드 추가**: `test-google-sheets-sync.js` 파일로 동기화 기능 테스트 가능

### 2025-11-08 - ID 중복 방지 강화
- ✅ **ID 중복 방지 로직 강화**: 문제 ID가 절대 중복되지 않도록 안전장치 추가
  - 사용 중인 ID를 Set으로 관리하여 중복 체크
  - 1000-1999 범위에서 사용 가능한 가장 작은 ID 자동 할당
  - Google Sheets 동기화 시에도 중복 ID 자동 조정
  - ID 중복 시 에러 발생으로 데이터 무결성 보장

### 2025-11-08 - 문제 ID 및 정렬 개선
- ✅ **문제 ID 범위 변경**: 문제 ID를 0-1000대 범위(1000-1999)로 변경
- ✅ **최신 문제 우선 정렬**: 가장 최신 문제나 등록된 문제가 맨 위로 배치되도록 ID 내림차순 정렬
- ✅ **문제 번호 표시 변경**: "문제 1, 문제 2" 대신 "ID: 1000, ID: 1001" 형식으로 표시
- ✅ **Google Sheets 동기화 개선**: Google Sheets에서 가져온 데이터의 ID를 1000대 범위로 자동 조정

### 2025-11-08 - CSS 스타일링 개선
- ✅ **TailwindCSS 유틸리티 클래스 활용**: 모든 페이지에서 일관된 디자인 시스템 적용
  - **색상 시스템**: 
    - 파란색(blue): 주요 액션, 선택된 항목
    - 초록색(green): 성공, 정답, 합격
    - 빨간색(red): 오류, 오답, 불합격
    - 노란색(yellow): 경고, 수정
    - 회색(gray): 비활성, 배경
  - **그라데이션 배경**: 
    - 로그인/홈: `bg-gradient-to-br from-blue-50 to-indigo-100`
    - 관리자 로그인: `bg-gradient-to-br from-purple-50 to-pink-100`
  - **카드 디자인**: 
    - `rounded-lg`, `rounded-2xl`: 둥근 모서리
    - `shadow-md`, `shadow-2xl`: 그림자 효과
    - `bg-white`: 흰색 배경
  - **버튼 스타일**: 
    - 기본: `px-4 py-2 rounded-lg transition-colors`
    - 호버: `hover:bg-*-600`, `hover:bg-*-700`
    - 비활성: `disabled:bg-gray-400`, `disabled:cursor-not-allowed`
  - **반응형 디자인**: 
    - `grid-cols-1 md:grid-cols-2`: 모바일/데스크톱 그리드
    - `flex-wrap`: 작은 화면에서 줄바꿈
    - `max-w-*`: 최대 너비 제한
  - **문제 현황 카드**: 
    - `bg-blue-50`, `bg-green-50`, `bg-yellow-50`, `bg-purple-50`, `bg-gray-50`: 카테고리별 색상
    - `text-2xl font-bold`: 큰 숫자 표시
  - **모달 디자인**: 
    - `fixed inset-0 bg-black bg-opacity-50`: 반투명 배경
    - `max-h-[90vh] overflow-y-auto`: 스크롤 가능한 모달
    - `sticky top-0`: 상단 고정 헤더
  - **문제 번호 네비게이션**: 
    - `grid grid-cols-10 gap-2`: 10열 그리드
    - 현재 문제: `bg-blue-500 text-white`
    - 답변 완료: `bg-green-100 text-green-800`
    - 미답변: `bg-gray-200 text-gray-700`
  - **타이머 스타일**: 
    - 정상: `bg-blue-100 text-blue-700`
    - 경고(5분 이하): `bg-red-100 text-red-700`
  - **통계 차트**: 
    - Recharts 라이브러리 사용
    - `ResponsiveContainer`: 반응형 차트
    - Bar Chart, Line Chart, Pie Chart 지원

### 2025-11-08 - 에러 수정 및 기능 개선
- ✅ **기타 탭 추가**: 문제관리 탭에 '기타' 카테고리 필터 추가
- ✅ **문제 목록 key 중복 문제 해결**: 고유한 key 생성으로 React key 중복 에러 수정
- ✅ **LatexRenderer 에러 수정**: text가 null/undefined/number일 때 안전하게 처리
- ✅ **미리보기 기능 안정화**: 미리보기 모달에서 텍스트 안전 처리로 렌더링 오류 해결
- ✅ **60문항씩 리스트업**: 페이지당 60문제 표시 (이미 구현됨)

### 2025-11-08 - 관리자 페이지 개선
- ✅ **문제 현황 표시 추가**: 문제관리 탭에서 전체/카테고리별 문제 수 현황 표시
  - 전체 문제, 전기이론, 전기기기, 전기설비, 기타 카테고리별 문제 수를 한눈에 확인 가능
- ✅ **미리보기 기능 추가**: 
  - 문제 목록에서 문제 클릭 시 미리보기 모달 표시
  - 수정/삭제 버튼 옆에 미리보기 버튼 추가
  - 미리보기 모달에서 수정 버튼으로 바로 이동 가능
- ✅ **동기화 탭 추가**: Google Sheets ↔ LocalStorage 동기화 기능 복원
  - Google Sheets → LocalStorage: Google Sheets 데이터를 가져와서 LocalStorage에 저장
  - LocalStorage → Google Sheets: LocalStorage 데이터를 Google Sheets로 업로드
  - 동기화 상태 메시지 표시

### 2025-11-08 - 초기 구현 완료
- ✅ 타입 정의 완벽 구현 (Question, Member, WrongAnswer, ExamSession, ExamResult, Statistics)
- ✅ 초기 회원 데이터 23명 생성
- ✅ 스마트 오답노트 시스템 구현 (wrongCount, correctStreak, 3회 연속 정답 시 자동 제거)
- ✅ storage.ts 서비스 완벽 구현 (모든 CRUD 함수)
- ✅ 시험 모드 3가지 완벽 구현 (랜덤 60문제, 카테고리별 20문제, 오답노트 최대 20문제)
- ✅ 모든 페이지 구현 (Login, Home, Exam, Result, WrongAnswers, Statistics, Admin)
- ✅ LaTeX 렌더링 컴포넌트 구현
- ✅ 샘플 문제 데이터 20개 생성
- ✅ PM2 설정 파일 생성
- ✅ 데이터 백업/복원 기능

---

## 🚀 빠른 시작

### 1. 설치
```bash
npm install
```

### 2. 개발 모드 실행
```bash
npm run dev
```

### 3. PM2로 실행 (권장)
```bash
pm2 start ecosystem.config.cjs
pm2 logs electrical-cbt
```

### 4. 접속
- **사용자**: http://localhost:5173
- **관리자**: http://localhost:5173/admin (비밀번호: admin2024)

---

## 📚 주요 기능

### 1. 시험 모드 (3가지)
- **랜덤출제**: 전기이론 20 + 전기기기 20 + 전기설비 20 = 총 60문제
- **카테고리별**: 선택한 카테고리에서 20문제
- **오답노트**: 틀렸던 문제만 최대 20문제

### 2. 스마트 오답노트
- 문제를 틀리면: `wrongCount++`, `correctStreak = 0`
- 문제를 맞으면: `correctStreak++`
- **연속 3회 정답 시 자동 제거**

### 3. 시험 세션 복구
- 시험 중 브라우저 종료 시 자동 저장
- 재접속 시 이어서 풀기 또는 새로 시작 선택

### 4. 관리자 페이지
- 문제 추가/수정/삭제
- 회원 추가/수정/삭제
- 페이지네이션 (60문제/페이지)
- 체크박스 일괄 삭제
- **문제 현황 표시** (전체/카테고리별)
- **미리보기 기능** (문제 클릭 시 미리보기, 미리보기에서 수정 가능)
- **Google Sheets 동기화** (구글시트 ↔ 로컬)
- 데이터 내보내기/가져오기

---

## 📊 기술 스택

| 기술 | 버전 | 용도 |
|------|------|------|
| React | 19.0.0 | UI 프레임워크 |
| TypeScript | 5.9.3 | 타입 안정성 |
| Vite | 7.1.7 | 빌드 도구 |
| TailwindCSS | 3.4.18 | 스타일링 |
| KaTeX | 0.16.25 | LaTeX 렌더링 |
| Recharts | 3.3.0 | 차트 |
| LocalStorage | - | 데이터 저장 |
| PM2 | - | 프로세스 관리 |

---

## 📁 프로젝트 구조

```
electrical-cbt/
├── src/
│   ├── components/
│   │   └── LatexRenderer.tsx          # LaTeX 수식 렌더링
│   ├── data/
│   │   └── initialMembers.ts          # 초기 회원 23명
│   ├── pages/
│   │   ├── Login.tsx                  # 로그인 (이름 기반)
│   │   ├── Home.tsx                   # 시험 모드 선택
│   │   ├── Exam.tsx                   # 시험 응시 (60분 타이머)
│   │   ├── Result.tsx                 # 결과 확인
│   │   ├── WrongAnswers.tsx           # 오답노트
│   │   ├── Statistics.tsx             # 통계 (차트)
│   │   └── Admin.tsx                  # 관리자 페이지
│   ├── services/
│   │   ├── storage.ts                 # LocalStorage 관리
│   │   ├── loadSampleData.ts          # 샘플 데이터 로드
│   │   └── googleSheetsService.ts     # Google Sheets 동기화
│   ├── types/
│   │   └── index.ts                   # TypeScript 타입 정의
│   ├── App.tsx                        # 메인 앱 (라우터)
│   └── main.tsx                       # 진입점
├── sample_questions.json              # 샘플 문제 20개
├── ecosystem.config.cjs               # PM2 설정
├── package.json                       # 의존성
└── README.md                          # 이 문서
```

---

## 🎯 사용 방법

### 1️⃣ 로그인
- **이름 입력**: 23명 중 선택 (예: 고광욱, 강형윤 등)
- **게스트 모드**: 기록 저장 안됨

### 2️⃣ 시험 모드 선택
- **랜덤출제**: 정규 시험 (60문제)
- **카테고리별**: 집중 학습 (20문제)
- **오답노트**: 복습 (최대 20문제)

### 3️⃣ 시험 응시
- 60분 카운트다운 타이머
- 문제 번호 클릭으로 이동
- 답안 선택 및 변경 가능
- 시험 제출 또는 자동 제출 (시간 종료 시)

### 4️⃣ 결과 확인
- 점수 및 합격/불합격 (60점 기준)
- 분야별 정답률
- 오답 자동 저장
- 해설 보기

### 5️⃣ 오답노트
- 틀린 문제 목록
- 틀린 횟수, 연속 정답 횟수 표시
- 오답 복습하기
- 학습 완료 표시 (수동 삭제)

### 6️⃣ 통계
- 총 시험 횟수
- 평균 점수
- 카테고리별 정답률 차트 (Bar Chart)
- 최근 시험 기록 테이블

### 7️⃣ 관리자 페이지
- 비밀번호: `admin2024`
- **문제 관리**: 추가/수정/삭제, 페이지네이션, 일괄 삭제, **문제 현황 표시**, **미리보기**
- **회원 관리**: 추가/수정/삭제
- **동기화**: Google Sheets ↔ LocalStorage
- 데이터 백업: 내보내기/가져오기 (JSON)

---

## 🔒 LocalStorage 데이터

```typescript
{
  "questions": Question[],           // 문제 목록
  "members": Member[],               // 회원 목록 (23명)
  "currentUser": number,             // 현재 로그인 사용자 ID
  "wrongAnswers": WrongAnswer[],     // 오답 목록
  "examResults": ExamResult[],       // 시험 결과 기록
  "statistics": Statistics,          // 통계 데이터
  "currentExamSession": ExamSession  // 현재 시험 세션
}
```

---

## 🎨 UI/UX 특징

- ✅ **반응형 디자인**: 모바일/태블릿/데스크톱
- ✅ **직관적인 네비게이션**: 문제 번호 클릭 이동
- ✅ **색상 코딩**: 정답(초록), 오답(빨강), 선택(파랑)
- ✅ **LaTeX 수식 지원**: `$ ... $` 문법
- ✅ **실시간 피드백**: 타이머, 진행률 표시
- ✅ **아이콘 사용**: 이모지로 직관적 표현

---

## 🐛 문제 해결

### 포트 충돌
```bash
fuser -k 5173/tcp
pm2 delete all
pm2 start ecosystem.config.cjs
```

### 데이터 초기화
```javascript
// 브라우저 콘솔에서 실행
localStorage.clear();
location.reload();
```

### 샘플 문제 재로드
```javascript
// 브라우저 콘솔에서 실행
localStorage.removeItem('questions');
location.reload();
```

---

## 📈 성능 최적화

- ✅ **코드 분할**: 페이지별 컴포넌트 분리
- ✅ **메모이제이션**: React Hooks 활용
- ✅ **LocalStorage**: 빠른 데이터 접근
- ✅ **Vite HMR**: 초고속 개발 환경

---

## 🔐 보안

- ✅ **관리자 비밀번호**: admin2024 (변경 가능)
- ✅ **XSS 방어**: LaTeX 렌더링 sanitization
- ✅ **데이터 검증**: TypeScript 타입 체크

---

## 📦 빌드 및 배포

### 빌드
```bash
npm run build
```

### 미리보기
```bash
npm run preview
```

### 정적 호스팅 배포
- **Netlify**: `dist/` 디렉토리 드래그 앤 드롭
- **Vercel**: GitHub 연동 후 자동 배포
- **GitHub Pages**: gh-pages 브랜치에 `dist/` 푸시

---

## 📝 초기 회원 목록 (23명)

1. 고광욱 (010-5718-3865, 전남 나주시)
2. 강형윤 (010-3628-0835)
3. 고종수 (010-8010-4002)
4. 김성겸 (010-2512-2208)
5. 김재용
6. 김채윤
7. 김철현
8. 박명수
9. 박복남
10. 박용관
11. 박재윤
12. 배철호
13. 손유동
14. 손철흥
15. 이송민
16. 이인수
17. 이지희
18. 이충훈
19. 장정헌
20. 정은임
21. 하일수
22. 한소연
23. 황종명

---

## 🌟 주요 알고리즘

### 랜덤출제 알고리즘
```typescript
// 각 카테고리에서 20문제씩 선택
const categories = ['전기이론', '전기기기', '전기설비'];
categories.forEach(cat => {
  const categoryQuestions = allQuestions.filter(q => q.category === cat);
  const shuffled = [...categoryQuestions].sort(() => Math.random() - 0.5);
  const selected = shuffled.slice(0, 20);
  examQuestions.push(...selected);
});

// 문제 순서 랜덤 (옵션)
if (randomize) {
  examQuestions = [...examQuestions].sort(() => Math.random() - 0.5);
}
```

### 스마트 오답노트 알고리즘
```typescript
// 오답 추가
if (userAnswer !== correctAnswer) {
  wrongCount++;
  correctStreak = 0;
}

// 정답 처리
if (userAnswer === correctAnswer) {
  correctStreak++;
  if (correctStreak >= 3) {
    // 오답노트에서 제거
    removeWrongAnswer(questionId);
  }
}
```

---

## 📞 지원

문제가 발생하거나 질문이 있으시면:
1. README_FINAL.md 참고
2. 브라우저 콘솔 확인 (F12)
3. LocalStorage 데이터 확인

---

## 📄 라이선스

MIT License

---

## 👨‍💻 개발 정보

- **개발자**: AI Assistant (Claude Sonnet 4.5)
- **개발 기간**: 2025-11-08
- **버전**: 1.0.0
- **상태**: ✅ 완전 구현 완료

---

## 🎉 완성!

**모든 기능이 문서 기반으로 완벽하게 구현되었습니다!**

이제 `npm run dev` 또는 `pm2 start ecosystem.config.cjs`로 실행하여 사용하실 수 있습니다.

행운을 빕니다! 🍀
