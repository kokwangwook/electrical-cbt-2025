# ğŸ“ ì‹œí—˜ í˜ì´ì§€ ë¶„ì„

**ë¶„ì„ ì¼ì‹œ:** 2025-12-02 20:52:57 (KST)  
**ë¶„ì„ ëŒ€ìƒ:** `src/pages/Exam.tsx` (2,261ì¤„)  
**í˜ì´ì§€ ì—­í• :** ì‹œí—˜ ì‘ì‹œ ë° ë¬¸ì œ í’€ì´

---

## ğŸ“‹ ê°œìš”

ì‹œí—˜ í˜ì´ì§€ëŠ” ê°€ì¥ ë³µì¡í•œ í˜ì´ì§€ë¡œ, ì‹¤ì œ ì‹œí—˜ í™˜ê²½ì„ ì œê³µí•˜ê³  í•™ìŠµ ì§„ë„ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

---

## ğŸ”‘ ì£¼ìš” ê¸°ëŠ¥

### 1ï¸âƒ£ ë¬¸ì œ í‘œì‹œ

- âœ… **ì¹´í…Œê³ ë¦¬ë³„ ì •ë ¬**: ì „ê¸°ì´ë¡ (1-20) â†’ ì „ê¸°ê¸°ê¸°(21-40) â†’ ì „ê¸°ì„¤ë¹„(41-60)
- âœ… **LaTeX ìˆ˜ì‹ ë Œë”ë§**: KaTeX ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
- âœ… **ì´ë¯¸ì§€ ì§€ì›**: ë¬¸ì œì— ì´ë¯¸ì§€ ì²¨ë¶€ ê°€ëŠ¥
- âœ… **ê¸€ì í¬ê¸° ì¡°ì ˆ**: 100% / 150% / 200%

### 2ï¸âƒ£ ë‹µë³€ ì‹œìŠ¤í…œ

- âœ… **4ì§€ì„ ë‹¤**: 1ë²ˆ ~ 4ë²ˆ ì„ íƒ
- âœ… **ë‹µë³€ ì €ì¥**: LocalStorage ìë™ ì €ì¥
- âœ… **ë‹µë³€ ë³€ê²½**: ì–¸ì œë“ ì§€ ìˆ˜ì • ê°€ëŠ¥

### 3ï¸âƒ£ íƒ€ì´ë¨¸ ì‹œìŠ¤í…œ

#### ì‹œê°„ì œí•œ ì—†ìŒ (untimedRandom)
```typescript
if (examMode === 'untimedRandom') {
  return; // íƒ€ì´ë¨¸ ì‘ë™ ì•ˆí•¨
}
```

#### ì‹œê°„ì œí•œ ìˆìŒ (timedRandom, category, wrong, review)
```typescript
// í’€ì§€ ëª»í•œ ë¬¸ì œë‹¹ 1ë¶„ì”© ì‹œê°„ ë¶€ì—¬
const answeredCount = Object.keys(answers).length;
const unansweredCount = displayQuestions.length - answeredCount;
const totalTime = unansweredCount * 60; // ì´ˆ ë‹¨ìœ„

// ì‹œê°„ ì¢…ë£Œ ì‹œ ìë™ ì œì¶œ
if (remaining === 0) {
  alert('ì‹œí—˜ ì‹œê°„ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ìë™ìœ¼ë¡œ ì œì¶œë©ë‹ˆë‹¤.');
  handleSubmit(true);
}
```

### 4ï¸âƒ£ í•™ìŠµ ì§„ë„ ê´€ë¦¬

#### 6ë‹¨ê³„ ì§„ë„

```typescript
const progressOptions = [
  { value: 1, label: '1ï¸âƒ£ ì²˜ìŒ ë´„' },
  { value: 2, label: '2ï¸âƒ£ ì• ë§¤í•¨' },
  { value: 3, label: '3ï¸âƒ£ í—·ê°ˆë¦¼' },
  { value: 4, label: '4ï¸âƒ£ ê±°ì˜ ì•Œê² ìŒ' },
  { value: 5, label: '5ï¸âƒ£ í™•ì‹¤íˆ ì•' },
  { value: 6, label: '6ï¸âƒ£ ì™„ë²½ ì´í•´' },
];
```

#### ì „ì—­ ì €ì¥
```typescript
const handleLearningProgressChange = (questionId, progress) => {
  setLearningProgress(prev => ({
    ...prev,
    [questionId]: progress,
  }));
  
  // ì „ì—­ ì €ì¥ì†Œì— ì €ì¥ (ë‹¤ìŒì—ë„ í‘œì‹œ)
  updateGlobalLearningProgress(questionId, progress);
};
```

### 5ï¸âƒ£ ì„¸ì…˜ ë³µì›

```typescript
// ì‹¤ì „ ëª¨ì˜ê³ ì‚¬ëŠ” ì„¸ì…˜ ë³µì› ì•ˆí•¨
if (examMode === 'timedRandom') {
  clearCurrentExamSession();
  return;
}

// ê¸°íƒ€ ëª¨ë“œëŠ” ì„¸ì…˜ ë³µì›
const savedSession = getCurrentExamSession();
if (savedSession && savedSession.questions.length > 0) {
  setAnswers(savedSession.answers);
  setStartTime(savedSession.startTime);
  
  // í’€ì§€ ëª»í•œ ë¬¸ì œë‹¹ 1ë¶„ì”© ì‹œê°„ ë¶€ì—¬
  const unansweredCount = displayQuestions.length - answeredCount;
  setRemainingTime(unansweredCount * 60);
}
```

---

## ğŸ¯ ì£¼ìš” ë²„íŠ¼

### ğŸ“Š ì±„ì í•˜ê¸°

```typescript
handleScore() {
  // ì •ë‹µ/ì˜¤ë‹µ/ë¯¸ë‹µë³€ ê³„ì‚°
  displayQuestions.forEach(q => {
    if (answers[q.id] === q.answer) {
      correctCount++;
      // ì˜¤ë‹µë…¸íŠ¸ ëª¨ë“œë©´ ì¦‰ì‹œ ì œê±°
      if (examMode === 'wrong') {
        removeWrongAnswer(q.id);
      } else {
        updateCorrectAnswer(q.id);
      }
    } else {
      wrongCount++;
      if (answers[q.id]) {
        addWrongAnswer({...});
      }
    }
  });
  
  // ëª¨ë‹¬ í‘œì‹œ
  setScoreResult({
    total: displayQuestions.length,
    correct: correctCount,
    wrong: wrongCount,
    unanswered: unansweredCount,
    score: (correctCount / total) * 100,
    percentage: (correctCount / total) * 100,
  });
  setShowScoreModal(true);
}
```

### ğŸ“¤ ì œì¶œí•˜ê¸°

```typescript
handleSubmit(autoSubmit = false) {
  // ë¯¸ë‹µë³€ í™•ì¸
  if (!autoSubmit && unanswered > 0) {
    if (!confirm(`${unanswered}ë¬¸ì œê°€ ë¯¸ë‹µë³€ì…ë‹ˆë‹¤. ì œì¶œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
      return;
    }
  }
  
  // ì˜¤ë‹µ ì €ì¥
  displayQuestions.forEach(q => {
    if (answers[q.id] !== q.answer) {
      addWrongAnswer({
        questionId: q.id,
        question: q,
        userAnswer: answers[q.id],
        timestamp: Date.now(),
      });
    }
  });
  
  // ì‹œí—˜ ê²°ê³¼ ì €ì¥
  addExamResult({
    totalQuestions: displayQuestions.length,
    correctAnswers: correctCount,
    wrongQuestions,
    timestamp: Date.now(),
    mode: examMode,
  });
  
  // ì„œë²„ ë™ê¸°í™”
  saveUserDataToSupabase(userId, {...});
  
  // ì„¸ì…˜ ì‚­ì œ
  clearCurrentExamSession();
  
  // ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™
  onComplete(answersArray, examMode);
}
```

### ğŸšª ë‚˜ê°€ê¸°

```typescript
handleExit() {
  // ì‹¤ì „ ëª¨ì˜ê³ ì‚¬: ìƒˆ ì°½ ë‹«ê¸°
  if (isNewWindow && examMode === 'timedRandom') {
    window.close();
    return;
  }
  
  // ëœë¤ 60ë¬¸ì œ: íŒì—… ì—†ì´ ìë™ ì €ì¥
  if (examMode === 'untimedRandom') {
    saveCurrentExamSession({...});
    onExit();
    return;
  }
  
  // ê¸°íƒ€ ëª¨ë“œ: ì €ì¥ vs ì±„ì  ì„ íƒ
  const choice = confirm('ì €ì¥í•˜ê³  ë‚˜ê°€ê¸° vs ì±„ì í•˜ê³  ë‚˜ê°€ê¸°');
  
  if (choice) {
    // ì €ì¥í•˜ê³  ë‚˜ê°€ê¸°
    saveCurrentExamSession({...});
    onExit();
  } else {
    // ì±„ì í•˜ê³  ë‚˜ê°€ê¸°
    handleSubmit();
  }
}
```

### ğŸ’¾ ì €ì¥í•˜ê¸°

```typescript
handleSave() {
  if (examMode === 'timedRandom') {
    alert('ì‹¤ì „ ëª¨ì˜ê³ ì‚¬ëŠ” ì €ì¥í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    return;
  }
  
  saveCurrentExamSession({
    questions: displayQuestions,
    answers,
    learningProgress,
    startTime,
    mode: examMode,
    userId: currentUserId,
  });
  
  alert(`ì €ì¥ ì™„ë£Œ! ${Object.keys(answers).length}/${displayQuestions.length}ê°œ`);
}
```

### â° ì‹œê°„ ì´ˆê¸°í™”

```typescript
handleResetTime() {
  if (confirm('ì‹œí—˜ ì‹œê°„ì„ 60ë¶„ìœ¼ë¡œ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
    setStartTime(Date.now());
    setRemainingTime(60 * 60);
    setIsTimeReset(true);
    alert('ì‹œí—˜ ì‹œê°„ì´ 60ë¶„ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
  }
}
```

---

## ğŸ§® ê³„ì‚°ê¸° & ë„êµ¬

### ê³¼í•™ ê³„ì‚°ê¸°

```typescript
<ScientificCalculator
  isOpen={showCalculator}
  onClose={() => setShowCalculator(false)}
/>
```

**ê¸°ëŠ¥:**
- âœ… ê¸°ë³¸ ì‚¬ì¹™ì—°ì‚°
- âœ… ì‚¼ê°í•¨ìˆ˜ (sin, cos, tan)
- âœ… ì œê³±, ì œê³±ê·¼
- âœ… ë¡œê·¸, ì§€ìˆ˜

### ì œë³´ ê²Œì‹œíŒ

```typescript
<FeedbackBoard
  isOpen={showFeedbackBoard}
  onClose={() => setShowFeedbackBoard(false)}
  questionId={currentQuestion.id}
/>
```

**ì œë³´ íƒ€ì…:**
- ğŸ› ë²„ê·¸ ì œë³´
- ğŸ’¡ ê±´ì˜ì‚¬í•­
- â“ ë¬¸ì˜ì‚¬í•­

---

## ğŸ¨ ë¬¸ì œ ë„¤ë¹„ê²Œì´ì…˜

### ë¬¸ì œ ë²ˆí˜¸ í‘œì‹œ

```typescript
<div className="grid grid-cols-20">
  {displayQuestions.map((q, index) => (
    <button
      onClick={() => handleNavigate(index)}
      className={
        currentIndex === index 
          ? 'bg-blue-500'                    // í˜„ì¬ ë¬¸ì œ
          : answers[q.id] 
          ? 'border-2 border-green-500'      // ë‹µë³€ ì™„ë£Œ
          : 'bg-gray-200'                    // ë¯¸ë‹µë³€
      }
    >
      {index + 1}
    </button>
  ))}
</div>
```

### ì¹´í…Œê³ ë¦¬ë³„ êµ¬ë¶„

```typescript
// 1-20: ì „ê¸°ì´ë¡  (íŒŒë€ìƒ‰)
// 21-40: ì „ê¸°ê¸°ê¸° (ë³´ë¼ìƒ‰)
// 41-60: ì „ê¸°ì„¤ë¹„ (ì£¼í™©ìƒ‰)
```

---

## ğŸ–¨ï¸ ì¸ì‡„ ê¸°ëŠ¥

### 3ê°€ì§€ ì˜µì…˜

```typescript
const printOptions = [
  { value: 'questionsOnly', label: 'ë¬¸ì œë§Œ ì¸ì‡„' },
  { value: 'withAnswers', label: 'ë¬¸ì œ + ì •ë‹µ' },
  { value: 'withExplanations', label: 'ë¬¸ì œ + ì •ë‹µ + í•´ì„¤' },
];
```

### ì¸ì‡„ ì‹¤í–‰

```typescript
handlePrintExecute() {
  setShowPrintOptions(false);
  setTimeout(() => {
    window.print();
  }, 100);
}
```

---

## ğŸ“Š ì™„ë²½ ì´í•´ ê¸°ëŠ¥

### í•„í„°ë§

```typescript
// ì„¸ì…˜ ë³µì› ì‹œ "ì™„ë²½ ì´í•´" (value: 6) ë¬¸ì œ ì œì™¸
const displayQuestions = sortedQuestions.filter(q => {
  const progress = globalLearningProgress[q.id];
  return progress !== 6; // ì™„ë²½ ì´í•´ ì œì™¸
});
```

---

## ğŸ’¾ ì„¸ì…˜ ìë™ ì €ì¥

```typescript
useEffect(() => {
  // ì‹¤ì „ ëª¨ì˜ê³ ì‚¬ëŠ” ì €ì¥ ì•ˆí•¨
  if (examMode === 'timedRandom') return;
  
  const session: ExamSession = {
    questions: displayQuestions,
    answers,
    learningProgress,
    startTime,
    mode: examMode,
    userId: currentUserId,
  };
  
  saveCurrentExamSession(session);
}, [answers, learningProgress, displayQuestions]);
```

---

## ğŸ“± ë°˜ì‘í˜• ë””ìì¸

### ëª¨ë°”ì¼ ê°ì§€

```typescript
const [isMobile, setIsMobile] = useState(isMobileDevice());

useEffect(() => {
  const handleResize = () => {
    setIsMobile(isMobileDevice());
  };
  window.addEventListener('resize', handleResize);
}, []);
```

### ë ˆì´ì•„ì›ƒ ì¡°ì •

```typescript
{isMobile ? (
  // ëª¨ë°”ì¼ ë ˆì´ì•„ì›ƒ (ì„¸ë¡œ)
  <div className="flex flex-col">...</div>
) : (
  // PC ë ˆì´ì•„ì›ƒ (ê°€ë¡œ)
  <div className="grid grid-cols-2">...</div>
)}
```

---

## ğŸ¯ í•µì‹¬ íŠ¹ì§•

### 1. ëª¨ë“œë³„ ìµœì í™”

- âœ… **untimedRandom**: ì‹œê°„ ë¬´ì œí•œ, ì„¸ì…˜ ì €ì¥
- âœ… **timedRandom**: 60ë¶„ ì œí•œ, ì„¸ì…˜ ì €ì¥ ì•ˆí•¨
- âœ… **category/wrong/review**: ë¬¸ì œë‹¹ 1ë¶„, ì„¸ì…˜ ì €ì¥

### 2. ìŠ¤ë§ˆíŠ¸ íƒ€ì´ë¨¸

- âœ… í’€ì§€ ëª»í•œ ë¬¸ì œë‹¹ 1ë¶„ ë¶€ì—¬
- âœ… ì‹œê°„ ì¢…ë£Œ ì‹œ ìë™ ì œì¶œ
- âœ… ì‹œê°„ ì´ˆê¸°í™” ì˜µì…˜

### 3. í•™ìŠµ ì§„ë„ ê´€ë¦¬

- âœ… 6ë‹¨ê³„ ì§„ë„
- âœ… ì „ì—­ ì €ì¥
- âœ… ì™„ë²½ ì´í•´ í•„í„°ë§

### 4. ì˜¤ë‹µ ê´€ë¦¬

- âœ… ì¦‰ì‹œ ì˜¤ë‹µ ì €ì¥
- âœ… ì˜¤ë‹µë…¸íŠ¸ ëª¨ë“œ ì¦‰ì‹œ ì œê±°
- âœ… ì¼ë°˜ ëª¨ë“œ 3íšŒ ì •ë‹µ ì‹œ ì œê±°

---

**ë¶„ì„ ì™„ë£Œ ì¼ì‹œ:** 2025-12-02 20:52:57 (KST)
